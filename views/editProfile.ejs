<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Редактирование профиля</title>
    <link href="/css/output.css" rel="stylesheet">
</head>
<body class="bg-gray-100 flex justify-center items-center h-screen">
<div class="max-w-md w-full bg-white p-6 rounded shadow-md">
    <h2 class="text-2xl font-bold mb-4">Редактировать профиль</h2>


    <form action="/profile/<%= user.id %>/edit/?_csrf=<%=csrfToken%>" method="POST" enctype="multipart/form-data" class="space-y-4"> <!-- Спасибо за детство, легенда https://stackoverflow.com/questions/42685940/csrf-and-multer-invalid-csrf-token-error -->
        <input type="hidden" name="_csrf" value="<%= csrfToken %>">
        <% console.log('edit', csrfToken); %>
        <div>
            <label class="block text-sm font-medium">Имя:</label>
            <input type="text" name="name" value="<%= user.name %>" class="w-full p-2 border rounded" required>
        </div>

        <div>
            <label class="block text-sm font-medium">О себе:</label>
            <textarea name="bio" class="w-full p-2 border rounded"><%= user.bio %></textarea>
        </div>

        <div>
            <label class="block text-sm font-medium">GitHub:</label>
            <input type="url" name="github" value="<%= user.github %>" class="w-full p-2 border rounded">
        </div>

        <div>
            <label class="block text-sm font-medium">Telegram:</label>
            <input type="url" name="telegram" value="<%= user.telegram %>" class="w-full p-2 border rounded">
        </div>

        <div>
            <label class="block text-sm font-medium">LinkedIn:</label>
            <input type="url" name="linkedin" value="<%= user.linkedin %>" class="w-full p-2 border rounded">
        </div>

        <div>
            <label class="block text-sm font-medium">Аватар:</label>
            <input type="file" name="avatar" class="w-full p-2 border rounded" accept="image/png, image/jpeg, image/webp">
            <% if (user.avatar) { %>
                <img src="<%= user.avatar %>" class="w-16 h-16 mt-2 rounded-full">
            <% } %>
        </div>

        <div>
            <label class="block text-sm font-medium">Обложка профиля:</label>
            <input type="file" name="cover" class="w-full p-2 border rounded" accept="image/png, image/jpeg, image/webp">
            <% if (user.cover) { %>
                <img src="<%= user.cover %>" class="w-full h-32 mt-2 rounded">
            <% } %>
        </div>

        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded w-full" onclick="alert('Данные обновлены');">Сохранить</button>
    </form>

    <a href="/profile/<%= user.id %>" class="block text-center text-blue-500 mt-4">Назад в профиль</a>
</div>
</body>
</html>
